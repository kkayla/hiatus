<h1>Home#index</h1>
<p>Find me in app/views/home/index.html.erb</p>
<strong>life is a beach </strong>

<button onclick="getLocation()">Try It</button>
<p id="demo"></p>

<%= form_tag "/search" do %>
  <%= text_field_tag :query %>
  <%= submit_tag %>
<% end %>
<%= @results[1] if @results %>
<!-- ^since the input box is only pulling the destination info on the map, set the results id to 1 -->
<!-- ^if we have the find results we inint the map. there is no map when we first loads -->

<div id="map"></div>
<script>
var x = document.getElementById("demo");

function getLocation() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition);
    } else {
        x.innerHTML = "Geolocation is not supported by this browser.";
    }
}

function showPosition(position) {
    x.innerHTML = "Latitude: " + position.coords.latitude +
    "<br>Longitude: " + position.coords.longitude;
}
</script>
<script>
function initMap() {
  var map = new google.maps.Map(document.getElementById('map'), {
    center: {lat: <%=@results[1]['pos'].split(',')[0] if @results%>,
            lng: <%=@results[1]['pos'].split(',')[1] if @results%>},
    zoom: 14
  });
}
</script>



<!-- <script>
function initMap() {
  var map = new google.maps.Map(document.getElementById('map'), {
    center: {lat: 1.44197,
            lng: 38.4314},
            zoom: 14
  });
}
</script> -->

<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAL3tGbNJnkQPnEp5KRfIUi-TOJ6-LWZ0I&callback=initMap">
// ^async lets the broswer render the rest of the webiste while the Maps API loads. when the blessed api is ready, it calls the function specified using the callback which is: "initMap"
</script>

</body>
</html>
